"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(v){var c=new Date(1970,1,1,0,0,0),T=86400,s={className:null,minTime:null,maxTime:null,durationTime:null,step:30,showDuration:!1,timeFormat:"g:ia",scrollDefaultNow:!1,scrollDefaultTime:!1,selectOnBlur:!1,disableTouchKeyboard:!1,forceRoundTime:!1,appendTo:"body",orientation:"ltr",disableTimeRanges:[],closeOnWindowScroll:!1,typeaheadHighlight:!0,noneOption:!1},l={am:"am",pm:"pm",AM:"AM",PM:"PM",decimal:".",mins:"mins",hr:"hr",hrs:"hrs"},b={init:function(r){return this.each(function(){var e=v(this),i=[];for(var t in s)e.data(t)&&(i[t]=e.data(t));var a=v.extend({},s,i,r);a.lang&&(l=v.extend(l,a.lang)),a=n(a),e.data("timepicker-settings",a),e.addClass("ui-timepicker-input"),a.useSelect?o(e):(e.prop("autocomplete","off"),e.on("click.timepicker focus.timepicker",b.show),e.on("change.timepicker",p),e.on("keydown.timepicker",f),e.on("keyup.timepicker",h),p.call(e.get(0)))})},show:function(e){e&&e.preventDefault();var i=v(this),t=i.data("timepicker-settings");if(t.useSelect)i.data("timepicker-list").focus();else{x(i)&&i.blur();var a=i.data("timepicker-list");if(!i.prop("readonly")&&(a&&0!==a.length&&"function"!=typeof t.durationTime||(o(i),a=i.data("timepicker-list")),!a.is(":visible"))){b.hide(),a.show();var r={};"rtl"==t.orientation?r.left=i.offset().left+i.outerWidth()-a.outerWidth()+parseInt(a.css("marginLeft").replace("px",""),10):r.left=i.offset().left+parseInt(a.css("marginLeft").replace("px",""),10),i.offset().top+i.outerHeight(!0)+a.outerHeight()>v(window).height()+v(window).scrollTop()?r.top=i.offset().top-a.outerHeight()+parseInt(a.css("marginTop").replace("px",""),10):r.top=i.offset().top+i.outerHeight()+parseInt(a.css("marginTop").replace("px",""),10),a.offset(r);var s=a.find(".ui-timepicker-selected");if(s.length||(d(i)?s=m(i,a,D(d(i))):t.scrollDefaultNow?s=m(i,a,D(new Date)):!1!==t.scrollDefaultTime&&(s=m(i,a,D(t.scrollDefaultTime)))),s&&s.length){var n=a.scrollTop()+s.position().top-s.outerHeight();a.scrollTop(n)}else a.scrollTop(0);return v(document).on("touchstart.ui-timepicker mousedown.ui-timepicker",u),t.closeOnWindowScroll&&v(document).on("scroll.ui-timepicker",u),i.trigger("showTimepicker"),this}}},hide:function(e){var i=v(this),t=i.data("timepicker-settings");return t&&t.useSelect&&i.blur(),v(".ui-timepicker-wrapper:visible").each(function(){var e=v(this),i=e.data("timepicker-input"),t=i.data("timepicker-settings");t&&t.selectOnBlur&&S(i),e.hide(),i.trigger("hideTimepicker")}),this},option:function(e,i){var t=this,a=t.data("timepicker-settings"),r=t.data("timepicker-list");if("object"==(void 0===e?"undefined":_typeof(e)))a=v.extend(a,e);else if("string"==typeof e&&void 0!==i)a[e]=i;else if("string"==typeof e)return a[e];return a=n(a),t.data("timepicker-settings",a),r&&(r.remove(),t.data("timepicker-list",!1)),a.useSelect&&o(t),this},getSecondsFromMidnight:function(){return D(d(this))},getTime:function(e){var i=d(this);if(!i)return null;e||(e=new Date);var t=D(i),a=new Date(e);return a.setHours(t/3600),a.setMinutes(t%3600/60),a.setSeconds(t%60),a.setMilliseconds(0),a},setTime:function(e){var i=this;return C(i,M(D(e),i.data("timepicker-settings").timeFormat)),i.data("timepicker-list")&&H(i,i.data("timepicker-list")),this},remove:function(){var e=this;if(e.hasClass("ui-timepicker-input"))return e.removeAttr("autocomplete","off"),e.removeClass("ui-timepicker-input"),e.removeData("timepicker-settings"),e.off(".timepicker"),e.data("timepicker-list")&&e.data("timepicker-list").remove(),e.removeData("timepicker-list"),this}};function n(e){if(e.minTime&&(e.minTime=D(e.minTime)),e.maxTime&&(e.maxTime=D(e.maxTime)),e.durationTime&&"function"!=typeof e.durationTime&&(e.durationTime=D(e.durationTime)),0<e.disableTimeRanges.length){for(var i in e.disableTimeRanges)e.disableTimeRanges[i]=[D(e.disableTimeRanges[i][0]),D(e.disableTimeRanges[i][1])];e.disableTimeRanges=e.disableTimeRanges.sort(function(e,i){return e[0]-i[0]});for(i=e.disableTimeRanges.length-1;0<i;i--)e.disableTimeRanges[i][0]<=e.disableTimeRanges[i-1][1]&&(e.disableTimeRanges[i-1]=[Math.min(e.disableTimeRanges[i][0],e.disableTimeRanges[i-1][0]),Math.max(e.disableTimeRanges[i][1],e.disableTimeRanges[i-1][1])],e.disableTimeRanges.splice(i,1))}return e}function o(i){var e=i.data("timepicker-settings"),t=i.data("timepicker-list");if(t&&t.length&&(t.remove(),i.data("timepicker-list",!1)),e.useSelect)var a=t=v("<select />",{class:"ui-timepicker-select"});else t=v("<ul />",{class:"ui-timepicker-list"}),(a=v("<div />",{class:"ui-timepicker-wrapper",tabindex:-1})).css({display:"none",position:"absolute"}).append(t);if(e.noneOption)if(!0===e.noneOption&&(e.noneOption=e.useSelect?"Time...":"None"),v.isArray(e.noneOption))for(var r in e.noneOption){var s=y(e.noneOption[r],e.useSelect);t.append(s)}else{s=y(e.noneOption,e.useSelect);t.append(s)}e.className&&a.addClass(e.className),null===e.minTime&&null===e.durationTime||!e.showDuration||a.addClass("ui-timepicker-with-duration");var n=e.minTime;"function"==typeof e.durationTime?n=D(e.durationTime()):null!==e.durationTime&&(n=e.durationTime);var o=null!==e.minTime?e.minTime:0,c=null!==e.maxTime?e.maxTime:o+T-1;c<=o&&(c+=T),c===T-1&&-1!==e.timeFormat.indexOf("H")&&(c=T);var l=e.disableTimeRanges,u=0,m=l.length;for(r=o;r<=c;r+=60*e.step){var p,d=r,f=M(d,e.timeFormat);if(e.useSelect)(p=v("<option />",{value:f})).text(f);else(p=v("<li />")).data("time",d<=86400?d:d%86400),p.text(f);if((null!==e.minTime||null!==e.durationTime)&&e.showDuration){var h=R(r-n);if(e.useSelect)p.text(p.text()+" ("+h+")");else{var g=v("<span />",{class:"ui-timepicker-duration"});g.text(" ("+h+")"),p.append(g)}}u<m&&(d>=l[u][1]&&(u+=1),l[u]&&d>=l[u][0]&&d<l[u][1]&&(e.useSelect?p.prop("disabled",!0):p.addClass("ui-timepicker-disabled"))),t.append(p)}if(a.data("timepicker-input",i),i.data("timepicker-list",a),e.useSelect)t.val(w(i.val(),e)),t.on("focus",function(){v(this).data("timepicker-input").trigger("showTimepicker")}),t.on("blur",function(){v(this).data("timepicker-input").trigger("hideTimepicker")}),t.on("change",function(){C(i,v(this).val(),"select")}),i.hide().after(t);else{var k=e.appendTo;"string"==typeof k?k=v(k):"function"==typeof k&&(k=k(i)),k.append(a),H(i,t),t.on("click","li",function(e){i.off("focus.timepicker"),i.on("focus.timepicker-ie-hack",function(){i.off("focus.timepicker-ie-hack"),i.on("focus.timepicker",b.show)}),x(i)||i[0].focus(),t.find("li").removeClass("ui-timepicker-selected"),v(this).addClass("ui-timepicker-selected"),S(i)&&(i.trigger("hideTimepicker"),a.hide())})}}function y(e,i){var t,a,r;return"object"==(void 0===e?"undefined":_typeof(e))?(t=e.label,a=e.className,r=e.value):"string"==typeof e?t=e:v.error("Invalid noneOption value"),i?v("<option />",{value:r,class:a,text:t}):v("<li />",{class:a,text:t}).data("time",r)}function w(e,i){if(v.isNumeric(e)||(e=D(e)),null===e)return null;var t=60*i.step;return M(Math.round(e/t)*t,i.timeFormat)}function u(e){var i=v(e.target);0===i.closest(".ui-timepicker-input").length&&0===i.closest(".ui-timepicker-wrapper").length&&(b.hide(),v(document).unbind(".ui-timepicker"))}function x(e){var i=e.data("timepicker-settings");return(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&i.disableTouchKeyboard}function m(e,i,r){if(!r&&0!==r)return!1;var t=e.data("timepicker-settings"),s=!1,n=30*t.step;return i.find("li").each(function(e,i){var t=v(i);if("number"==typeof t.data("time")){var a=t.data("time")-r;return Math.abs(a)<n||a==n?(s=t,!1):void 0}}),s}function H(e,i){i.find("li").removeClass("ui-timepicker-selected");var t=D(d(e));if(null!==t){var a=m(e,i,t);if(a){var r=a.offset().top-i.offset().top;(r+a.outerHeight()>i.outerHeight()||r<0)&&i.scrollTop(i.scrollTop()+a.position().top-a.outerHeight()),a.addClass("ui-timepicker-selected")}}}function p(e){if(""!==this.value){var i=v(this);i.data("timepicker-list");if(!i.is(":focus")||e&&"change"==e.type){var t=D(this.value);if(null!==t){var a=i.data("timepicker-settings"),r=!1;if(null!==a.minTime&&t<a.minTime?r=!0:null!==a.maxTime&&t>a.maxTime&&(r=!0),v.each(a.disableTimeRanges,function(){if(t>=this[0]&&t<this[1])return!(r=!0)}),a.forceRoundTime){var s=t%(60*a.step);s>=30*a.step?t+=60*a.step-s:t-=s}var n=M(t,a.timeFormat);r?C(i,n,"error")&&i.trigger("timeRangeError"):C(i,n)}else i.trigger("timeFormatError")}}}function d(e){return e.is("input")?e.val():e.data("ui-timepicker-value")}function C(e,i,t){if(e.is("input")){e.val(i);var a=e.data("timepicker-settings");a.useSelect&&e.data("timepicker-list").val(w(i,a))}return e.data("ui-timepicker-value")!=i?(e.data("ui-timepicker-value",i),"select"==t?e.trigger("selectTime").trigger("changeTime").trigger("change"):"error"!=t&&e.trigger("changeTime"),!0):(e.trigger("selectTime"),!1)}function f(e){var i=v(this),t=i.data("timepicker-list");if(!t||!t.is(":visible")){if(40!=e.keyCode)return!0;x(i)||i.focus()}switch(e.keyCode){case 13:return S(i)&&b.hide.apply(this),e.preventDefault(),!1;case 38:var a=t.find(".ui-timepicker-selected");return a.length?a.is(":first-child")||(a.removeClass("ui-timepicker-selected"),a.prev().addClass("ui-timepicker-selected"),a.prev().position().top<a.outerHeight()&&t.scrollTop(t.scrollTop()-a.outerHeight())):(t.find("li").each(function(e,i){if(0<v(i).position().top)return a=v(i),!1}),a.addClass("ui-timepicker-selected")),!1;case 40:return 0===(a=t.find(".ui-timepicker-selected")).length?(t.find("li").each(function(e,i){if(0<v(i).position().top)return a=v(i),!1}),a.addClass("ui-timepicker-selected")):a.is(":last-child")||(a.removeClass("ui-timepicker-selected"),a.next().addClass("ui-timepicker-selected"),a.next().position().top+2*a.outerHeight()>t.outerHeight()&&t.scrollTop(t.scrollTop()+a.outerHeight())),!1;case 27:t.find("li").removeClass("ui-timepicker-selected"),b.hide();break;case 9:b.hide();break;default:return!0}}function h(e){var i=v(this),t=i.data("timepicker-list");if(!t||!t.is(":visible"))return!0;if(!i.data("timepicker-settings").typeaheadHighlight)return t.find("li").removeClass("ui-timepicker-selected"),!0;switch(e.keyCode){case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 65:case 77:case 80:case 186:case 8:case 46:H(i,t);break;default:return}}function S(e){var i=e.data("timepicker-settings"),t=e.data("timepicker-list"),a=null,r=t.find(".ui-timepicker-selected");if(r.hasClass("ui-timepicker-disabled"))return!1;(r.length?a=r.data("time"):d(e)&&(a=D(d(e)),H(e,t)),null!==a)&&("string"==typeof a?e.val(a):C(e,M(a,i.timeFormat),"select"));return!0}function R(e){var i,t=Math.round(e/60);if(Math.abs(t)<60)i=[t,l.mins];else if(60==t)i=["1",l.hr];else{var a=(t/60).toFixed(1);"."!=l.decimal&&(a=a.replace(".",l.decimal)),i=[a,l.hrs]}return i.join(" ")}function M(e,i){if(null!==e){var t=new Date(c.valueOf()+1e3*e);if(!isNaN(t.getTime())){for(var a,r,s="",n=0;n<i.length;n++)switch(r=i.charAt(n)){case"a":s+=11<t.getHours()?l.pm:l.am;break;case"A":s+=11<t.getHours()?l.PM:l.AM;break;case"g":s+=0===(a=t.getHours()%12)?"12":a;break;case"G":s+=t.getHours();break;case"h":0!==(a=t.getHours()%12)&&a<10&&(a="0"+a),s+=0===a?"12":a;break;case"H":a=t.getHours(),e===T&&(a=24),s+=9<a?a:"0"+a;break;case"i":var o=t.getMinutes();s+=9<o?o:"0"+o;break;case"s":s+=9<(e=t.getSeconds())?e:"0"+e;break;default:s+=r}return s}}}function D(e){if(""===e)return null;if(!e||e+0==e)return e;"object"==(void 0===e?"undefined":_typeof(e))&&(e=e.getHours()+":"+a(e.getMinutes())+":"+a(e.getSeconds())),e=e.toLowerCase();var i;new Date(0);if(-1===e.indexOf(":")?(i=e.match(/^([0-9]):?([0-5][0-9])?:?([0-5][0-9])?\s*([pa]?)m?$/))||(i=e.match(/^([0-2][0-9]):?([0-5][0-9])?:?([0-5][0-9])?\s*([pa]?)m?$/)):i=e.match(/^(\d{1,2})(?::([0-5][0-9]))?(?::([0-5][0-9]))?\s*([pa]?)m?$/),!i)return null;var t=parseInt(1*i[1],10);return 3600*(i[4]?12==t?"p"==i[4]?12:0:t+("p"==i[4]?12:0):t)+60*(1*i[2]||0)+(1*i[3]||0)}function a(e){return("0"+e).slice(-2)}v.fn.timepicker=function(e){return this.length?b[e]?this.hasClass("ui-timepicker-input")?b[e].apply(this,Array.prototype.slice.call(arguments,1)):this:"object"!==(void 0===e?"undefined":_typeof(e))&&e?void v.error("Method "+e+" does not exist on jQuery.timepicker"):b.init.apply(this,arguments):this}});