jQuery(function(a){var b=!1;a(document.body).on("keyup keydown",function(a){b=a.ctrlKey||a.metaKey}),a("body").on("init_shipping_per_product",function(){a("input#_per_product_shipping").change(),a("input.variable_is_virtual").change(),a(".enable_per_product_shipping").change(),a("body").trigger("init_shipping_per_product_sortable")}).on("init_shipping_per_product_sortable",function(){a(".per_product_shipping_rules tbody").sortable({items:"tr",cursor:"move",axis:"y",scrollSensitivity:40,forcePlaceholderSize:!0,helper:"clone",opacity:.65,placeholder:"wc-metabox-sortable-placeholder",start:function(a,b){b.item.css("background-color","#f6f6f6")},stop:function(a,b){b.item.removeAttr("style")}})}).on("change","input#_per_product_shipping",function(){a("input#_per_product_shipping").is(":checked")?a(this).closest("div").find(".per_product_shipping_rules").show():a(this).closest("div").find(".per_product_shipping_rules").hide()}).on("change","input.variable_is_virtual",function(){a(this).is(":checked")?a(this).closest(".woocommerce_variation").find(".enable_per_product_shipping").parent("label").hide():a(this).closest(".woocommerce_variation").find(".enable_per_product_shipping").parent("label").show()}),a(".woocommerce_variations").on("change",".enable_per_product_shipping",function(){a(this).is(":checked")?a(this).closest(".woocommerce_variation").find(".per_product_shipping_rules").show():a(this).closest(".woocommerce_variation").find(".per_product_shipping_rules").hide()}).on("woocommerce_variations_added woocommerce_variations_loaded",function(){a("body").trigger("init_shipping_per_product")}),a("#woocommerce-product-data").on("woocommerce_variations_added woocommerce_variations_loaded",function(){a("body").trigger("init_shipping_per_product")}),a("#woocommerce-product-data").on("focus",".per_product_shipping_rules input",function(){b||a(".per_product_shipping_rules tr").removeClass("current"),a(this).closest("tr").addClass("current")}).on("click",".per_product_shipping_rules input",function(){return a(this).focus(),!0}).on("click",".per_product_shipping_rules .remove",function(){var b=a(this).closest(".per_product_shipping_rules").find("tbody");return b.find("tr.current").size()>0?(b.find("tr.current").find("input").val(""),b.find("tr.current").hide()):alert(wc_shipping_per_product_params.i18n_no_row_selected),!1}).on("click",".per_product_shipping_rules .insert",function(){var b=a(this).closest(".per_product_shipping_rules").find("tbody"),c=a(this).data("postid"),d='<tr>				<td class="sort">&nbsp;</td>				<td class="country"><input type="text" value="" placeholder="*" name="per_product_country['+c+'][new][]" /></td>				<td class="state"><input type="text" value="" placeholder="*" name="per_product_state['+c+'][new][]" /></td>				<td class="postcode"><input type="text" value="" placeholder="*" name="per_product_postcode['+c+'][new][]" /></td>				<td class="cost"><input type="text" value="0.00" placeholder="0.00" name="per_product_cost['+c+'][new][]" /></td>				<td class="item_cost"><input type="text" value="0.00" placeholder="0.00" name="per_product_item_cost['+c+'][new][]" /></td>			</tr>';return b.find("tr.current").size()>0?b.find("tr.current").last().after(d):b.append(d),!1}).on("click",".per_product_shipping_rules .export",function(){var b=a(this).data("postid"),c="data:application/csv;charset=utf-8,"+wc_shipping_per_product_params.i18n_product_id+","+wc_shipping_per_product_params.i18n_country_code+","+wc_shipping_per_product_params.i18n_state+","+wc_shipping_per_product_params.i18n_postcode+","+wc_shipping_per_product_params.i18n_cost+","+wc_shipping_per_product_params.i18n_item_cost+"\n";return a(this).closest(".per_product_shipping_rules").find("tbody tr:not(.sort)").each(function(){var d=b+",";a(this).find("input").each(function(){var b=a(this).val();b||(b=a(this).attr("placeholder")),d=d+b+","}),d=d.substring(0,d.length-1),c=c+d+"\n"}),a(this).attr("href",encodeURI(c)),!0}),a("body").trigger("init_shipping_per_product")});