(function($){$(document).ready(function(){$(window).load(function(){if($.cookie("ops_scroll_cookie")&&$.cookie("ops_scroll_cookie")!=="scroll_done"){var a=$.cookie("ops_scroll_cookie");if(a.length){$.scrollTo(a,{duration:'slow'})}$.removeCookie('ops_scroll_cookie',{path:'/'})}});function ajax_cart_sidebar(){var e={action:'ops_update_header'};e[ops_php_data.nonce_post_id]=ops_php_data.nonce;$.ajax({type:'post',url:ops_php_data.ajax_url,data:e,success:function(a){var b=ops_php_data.sidebar_tag+ops_php_data.sidebar_attribute+ops_php_data.sidebar_attribute_value;var c=ops_php_data.amount_tag+ops_php_data.amount_attribute+ops_php_data.amount_attribute_value;var d=ops_php_data.contents_tag+ops_php_data.contents_attribute+ops_php_data.contents_attribute_value;if(ops_php_data.enable_cart_amount_update){$(b+" "+c).html($(a).filter('.amount').text())}if(ops_php_data.enable_cart_contents_update){$(b+" "+d).html($(a).filter('.contents').text())}}})};function ajax_request(g,h,i,j,k){g.block({message:null,overlayCSS:{background:'#fff',opacity:0.6}});$.ajax({type:'post',url:ops_php_data.ajax_url,data:h,success:function(b){g.unblock();if(i){$('#one-page-shopping-cart-content').html(b)}if(ops_php_data.display_cart){$('#one-page-shopping-cart').show()}else{$('#one-page-shopping-cart').hide()}if(k===true){var c=$('#order_review');if(c.length&&c.is(':visible')){$('body').trigger('update_checkout')}else{var d=$('#shiptobilling-checkbox').length?$('#shiptobilling-checkbox').is(':checked'):ops_php_data.ship_to_billing_def==='1';var e=$('#ship-to-different-address-checkbox').length?$('#ship-to-different-address-checkbox').is(':checked'):ops_php_data.ship_to_different_def!=='0';$('#one-page-shopping-checkout').show();var f={action:'ops_update_checkout'};f[ops_php_data.nonce_post_id]=ops_php_data.nonce;$.ajax({type:'post',url:ops_php_data.ajax_url,data:f,success:function(a){if(a!=="-1"){$('#one-page-shopping-checkout-content').html(a);$('#shiptobilling-checkbox').attr('checked',d).change();$('#ship-to-different-address-checkbox').attr('checked',e).change();if(j!==false&&j.length&&!ops_php_data.force_refresh){$('body').scrollTo(j,{duration:'slow'})}}else{if(j!==false&&j.length){$.cookie("ops_scroll_cookie",j,{expires:1,path:"/"});location.reload()}}}})}}if(ops_php_data.force_refresh){if(j!==false&&j.length){$.cookie("ops_scroll_cookie",j,{expires:1,path:"/"})}if($('#one-page-shopping-cart-content table').length===0&&i){$('#one-page-shopping-checkout, #one-page-shopping-cart').hide();$.cookie("ops_scroll_cookie",'#page',{expires:1,path:"/"})}location.reload()}$('div.quantity:not(.buttons_added), td.quantity:not(.buttons_added)').addClass('buttons_added');if($('#one-page-shopping-cart-content table').length===0&&i&&!ops_php_data.force_refresh){$('#one-page-shopping-checkout, #one-page-shopping-cart').hide();$('body').scrollTo('#page',{duration:'slow'})}if(ops_php_data.enable_sidebar_update){ajax_cart_sidebar()}remove_unused_markup()}})};function remove_unused_markup(){for(var i=0;i<ops_php_data.remove_items.length;i++){$(ops_php_data.remove_items[i]).remove()}}if($('#one-page-shopping-cart-content table').length!==0||ops_php_data.cart_count>0){$('#one-page-shopping-checkout').show()}$('#one-page-shopping-checkout-content').on('change','#shiptobilling input',function(){$('div.shipping_address').hide();if(!$(this).is(':checked')){$('div.shipping_address').slideDown()}});$('#shiptobilling input').change();$('#one-page-shopping-checkout-content').on('change','#ship-to-different-address-checkbox',function(){$('div.shipping_address').hide();if($(this).is(':checked')){$('div.shipping_address').slideDown()}});$('#ship-to-different-address-checkbox').change();$('form.cart').on('click','.single_add_to_cart_button',function(b){var c={action:'ops_add_to_cart',form:{}};var d=ops_php_data.display_cart?'#one-page-shopping-header':'#one-page-shopping-checkout-header',items=$(this).parents('form.cart').find('input[type!=radio][name], input[type=radio][name]:checked, select[name], textarea[name]');if($('.group_table').length){items.each(function(){var a=getInputData($(this));if(a.id!==undefined){if(c.form[a.id]===undefined){c.form[a.id]={}}c.form[a.id][a.name]=$(this).val()}})}else{var e=$('input[name=add-to-cart]').val();items.each(function(){if(c.form[e]===undefined){c.form[e]={}}c.form[e][$(this).attr('name')]=$(this).val()})}c[ops_php_data.nonce_post_id]=ops_php_data.nonce;ajax_request($(b.target),c,ops_php_data.display_cart,d,true);return false});function getInputData(a){var b=a.attr('name').split('['),data={name:b[0]};if(b[1]!==undefined){data.id=b[1].replace(']','')}return data}$('.products').on('click','.product_type_simple',function(a){a.preventDefault();var b=ops_php_data.display_cart?'#one-page-shopping-header':'#one-page-shopping-checkout-header',ajax_data={action:'ops_add_to_cart',form:{}};ajax_data[ops_php_data.nonce_post_id]=ops_php_data.nonce;var c=$(this).data('product_id');ajax_data.form[c]={};if(!$(this).attr('data-quantity')){ajax_data.form[c]['quantity']="1"}else{ajax_data.form[c]['quantity']=$(this).data('quantity')}ajax_request($(a.target),ajax_data,ops_php_data.display_cart,b,true);return false});$('.one-page-shopping-add-to-cart').on('click','.product_type_simple',function(a){a.preventDefault();var b=ops_php_data.display_cart?'#one-page-shopping-header':'#one-page-shopping-checkout-header',ajax_data={action:'ops_add_to_cart',form:{}};ajax_data[ops_php_data.nonce_post_id]=ops_php_data.nonce;var c=$(this).data('product_id');ajax_data.form[c]={};ajax_data.form[c]['quantity']=$(this).data('quantity');ajax_request($(a.target),ajax_data,ops_php_data.display_cart,b,true);return false});$('.one-page-shopping-add-to-cart').on('click','.product_type_variation',function(a){a.preventDefault();var b=ops_php_data.display_cart?'#one-page-shopping-header':'#one-page-shopping-checkout-header',ajax_data={action:'ops_add_to_cart',form:{}};ajax_data[ops_php_data.nonce_post_id]=ops_php_data.nonce;var c=$(this).data('product_id');ajax_data.form[c]={};ajax_data.form[c]['quantity']=$(this).data('quantity');var d=$(this).attr("href");var e=d.split("?");var f=e[1].split("&");for(var i=0;i<f.length;i++){var g=f[i].split("=");ajax_data.form[c][g[0]]=g[1]}ajax_request($(a.target),ajax_data,ops_php_data.display_cart,b,true);return false});$('div.related').on('click','.add_to_cart_button_ops',function(a){var b={action:'ops_add_to_cart_related',product_id:$(this).attr('data-product_id')};var c=ops_php_data.display_cart?'#one-page-shopping-header':'#one-page-shopping-checkout-header';b[ops_php_data.nonce_post_id]=ops_php_data.nonce;ajax_request($(a.target),b,ops_php_data.display_cart,c,true);return false});$('#one-page-shopping-cart-content').on('click','.product-remove > a',function(a){var b=this.search.split('remove_item=');if(b[1]!==undefined){b=b[1].split('&');if(b[0]!==undefined){var c={action:'ops_remove_from_cart',cart_item:b[0]};c[ops_php_data.nonce_post_id]=ops_php_data.nonce;ajax_request($(a.target).closest('form'),c,true,false,true);return false}}});$('#one-page-shopping-cart-content').on('click','input[name=update_cart]',function(a){var b,pattern=/\[(\w*)\]\[(\w*)\]/,ajax_data={action:'ops_update_cart',cart:new Object()};ajax_data[ops_php_data.nonce_post_id]=ops_php_data.nonce;$(this).parents('form').find('input[name^=cart]').each(function(){b=$(this).attr('name').match(pattern);if(b[2]!==undefined){if(ajax_data.cart[b[1]]===undefined){ajax_data.cart[b[1]]=new Object()}ajax_data.cart[b[1]][b[2]]=$(this).val()}});ajax_request($(a.target),ajax_data,true,false,true);return false});if(ops_php_data.display_checkout){$('#one-page-shopping-cart-content').on('click','input[name=proceed]',function(){$('body').scrollTo('#one-page-shopping-checkout-header',{duration:'slow'});return false})}$('#one-page-shopping-checkout-content').on('click','.woocommerce-remove-coupon',function(a){var b={action:'ops_remove_coupon'};b[ops_php_data.nonce_post_id]=ops_php_data.nonce;var c=this.search.split('remove_coupon=');if(c[1]!==undefined){b.coupon=c[1];ajax_request($(a.target),b,false,false,true)}return false});remove_unused_markup();if(ops_php_data.display_cart&&($('#one-page-shopping-cart-content table').length!==0||ops_php_data.cart_count>0)){$('#one-page-shopping-cart').show()}else{$('#one-page-shopping-cart').hide()}})})(jQuery);